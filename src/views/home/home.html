<ons-page ng-controller="HomeController as Ctrl" ng-device-backbutton="Ctrl.homeDeviceBackButton()">
    <generic-toolbar title="{{'HEADER_MESSAGE_HOME'|translate}}" back-button="false" style-class="fontSizeTitle">
        <right-content>
            <ons-toolbar-button ng-click="homeNavigator.pushPage('views/tabs/info-page-tabs.html', {id:'home'})"><ons-icon icon="fa-info-circle"></ons-icon></ons-toolbar-button>
        </right-content>
    </generic-toolbar>

    <!-- HOSPITAL NAME BAR -->
    <top-page-banner title="Ctrl.selectedHospitalToDisplay"></top-page-banner>

    <network-banner></network-banner>

    <div id="home-container">
        <!--
        PATIENT INFO HEADER
        ================================-->
        <div style="position:relative;z-index:1">
            <img src="./img/opal-init-photo.jpg" style="max-width:100vw">
            <div class="text-center" align="center" style="margin-top:-225px;margin-left:auto;margin-right:auto;position:relative;z-index:4;">
                <img ng-hide="Ctrl.user" src="./img/patient.png" style="margin-left:auto;margin-right:auto;" class="image-profile-home">
                <div class="image-profile--wrapper image-profile--wrapper--home" ng-hide="!Ctrl.user">
                    <div class="image-profile--icon image-profile--icon--home" ng-style="{'background-color': Ctrl.user.color}">{{Ctrl.user | profileInitials}}</div>
                </div>
            </div>
            <div class="item item-text-wrap " style="margin-top:-10px;margin-bottom:0px;padding-bottom: 1px">
                <p class="text-center">
                    <strong ng-class="fontSizeTitle" style="color:white">{{Ctrl.user.first_name}} {{Ctrl.user.last_name}}</strong>
                </p>
            </div>
        </div>





        <div style="margin-top:0;position:relative;z-index:3;padding-top:0;" >
            <ons-list style="margin-top:5px;position:relative;z-index:2">
                <ons-list-header class="person-list-header" ng-class="fontSizeTitle"></ons-list-header>

                <!--
                ACKNOWLEDGEMENTS
                ================================-->
                <ons-list-item modifier="chevron tappable" class="item" ng-click="Ctrl.goToAcknowledgements()">
                    <ons-row align="center">
                        <ons-col width="60px" align="center" style="text-align: center">
                            <ons-icon icon="fa-star" size="28px" style="color:#FFEB3B"></ons-icon>
                        </ons-col>
                        <ons-col>
                            <header>
                                <span class="item-title" ng-class="fontSizeTitle">{{"OPAL_ACKNOWLEDGEMENTS"|translate}}</span>
                            </header>
                        </ons-col>
                    </ons-row>
                </ons-list-item>

                <!--
                LEARN ABOUT OPAL
                ================================-->
                <ons-list-item modifier="chevron tappable" class="item" ng-if="Ctrl.allowedModules.hasOwnProperty('LAO') && Ctrl.allowedModules['LAO']" ng-click="Ctrl.gotoLearnAboutOpal()">
                    <ons-row align="center">
                        <ons-col width="60px" align="center" style="text-align: center">
                            <img style="width: 30px; margin: 2px 0px" src="img/Opal_Logo_Transparent_Inverse_Icon.png">
                        </ons-col>
                        <ons-col>
                            <header>
                                <span class="item-title" ng-class="fontSizeTitle">{{"OPAL_ABOUT"|translate}}</span>
                            </header>
                        </ons-col>
                    </ons-row>
                </ons-list-item>

                <!--
                NOTIFICATIONS
                ================================-->
                <ons-list-item modifier="chevron" class="item" ng-if="Ctrl.allowedModules.hasOwnProperty('NTF') && Ctrl.allowedModules['NTF']" ng-click="homeNavigator.pushPage('views/personal/notifications/notifications.html')">
                    <ons-row align="center">
                        <ons-col width="60px" style="text-align: center">
                            <ons-icon 
                                icon="ion-android-notifications"
                                size="2x"
                                style="color:#FFC107">
                            </ons-icon>
                            <span class="notification" ng-show="Ctrl.notificationsUnreadNumber > 0">
                                {{Ctrl.notificationsUnreadNumber}}
                            </span>
                        </ons-col>
                        <ons-col>
                            <header>
                                <span class="item-title" ng-class="fontSizeTitle">{{"NOTIFICATIONS"|translate}}</span>
                            </header>
                            <p class="item-desc" ng-class="fontSizeDesc"></p>
                        </ons-col>
                    </ons-row>
                </ons-list-item>

                <!--
                NAVIGABLE CHECKIN STATE (ALL CHECKED IN OR APPOINTMENTS AVAILABLE FOR CHECKING INTO)
                ======================================================================================-->
                <ons-list-item ng-if="Ctrl.checkinState.canNavigate && Ctrl.allowedModules.hasOwnProperty('CHK') && Ctrl.allowedModules['CHK']" modifier="chevron tappable" class="item" ng-click="Ctrl.goToCheckinAppointments()">
                    <ons-row align="center">
                        <ons-col width="60px" style="text-align: center">
                            <div>
                                <i ng-if="!Ctrl.checkinState.allCheckedIn && !Ctrl.checkinState.checkinError" class="fa fa-square-o fa-2x" style="color:#4CAF50;"></i>
                                <i ng-if="Ctrl.checkinState.allCheckedIn || Ctrl.checkinState.checkinError" class="fa fa-check-square-o fa-2x" style="color:#4CAF50;"></i>
                                <span ng-if="!Ctrl.checkinState.allCheckedIn && !Ctrl.checkinState.checkinError" class="notification" style="position: absolute; margin-left: -7px"> {{ Ctrl.checkinState.numberOfAppts }}</span>
                                <span ng-if="Ctrl.checkinState.checkinError" class="notification" style="position: absolute; margin-left: -7px"> ! </span>
                            </div>
                        </ons-col>
                        <ons-col>
                            <header>
                                <span style="margin-top: 0" class="item-title" ng-class="fontSizeTitle">{{"CHECKIN"|translate}}</span>
                            </header>
                            <p class="item-desc" ng-class="fontSizeDesc">{{Ctrl.checkinState.message|translate}} {{RoomLocation}}</p>
                            <p class="item-desc" ng-class="fontSizeDesc">{{Ctrl.calledApp["AppointmentType_"+Ctrl.language]}}</p>
                        </ons-col>
                    </ons-row>
                </ons-list-item>

                <!--
                NON-NAVIGABLE CHECKIN STATE (NO APPOINTMENTS)
                ======================================================================================-->
                <ons-list-item ng-if="!Ctrl.checkinState.canNavigate && Ctrl.allowedModules.hasOwnProperty('CHK') && Ctrl.allowedModules['CHK']" class="item">
                    <ons-row align="center">
                        <ons-col width="60px" style="text-align: center">
                            <i class="fa fa-square-o fa-2x" style="color:#9E9E9E;"></i>
                        </ons-col>
                        <ons-col>
                            <header>
                                <span style="margin-top: 0" class="item-title" ng-class="fontSizeTitle">{{"CHECKIN"|translate}}</span>
                            </header>
                            <p class="item-desc" ng-class="fontSizeDesc">{{Ctrl.checkinState.message|translate}}</p>
                        </ons-col>
                    </ons-row>
                </ons-list-item>

                <!--
                APPOINTMENT STATUS
                ===============================-->
                <ons-list-item modifier="chevron" class="item" ng-if="Ctrl.allowedModules.hasOwnProperty('APT') && Ctrl.allowedModules['APT']" ng-click="Ctrl.goToAppointments()">
                    <ons-row align="center">
                        <ons-col width="60px" style="text-align: center">
                            <i class="fa fa-calendar fa-2x" style="color: #ffc107"></i>
                        </ons-col>
                        <ons-col>
                            <header>
                                <span class="item-title" ng-class="fontSizeTitle">{{"NEXTAPPOINTMENT"|translate}}</span>
                            </header>
                            <p class="item-desc" ng-class="fontSizeDesc" ng-show="Ctrl.appointmentShown.ScheduledStartTime">
                                {{"UPCOMING"|translate}}: {{Ctrl.appointmentShown.ScheduledStartTime|date:'medium'}}
                            </p>
                        </ons-col>
                    </ons-row>
                </ons-list-item>
            </ons-list>
        </div>
    </div>
    <div ng-include="'./views/modals/info-modal.html'"></div>
</ons-page>