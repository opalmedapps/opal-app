<!--
SPDX-FileCopyrightText: Copyright (C) 2016 Opal Health Informatics Group at the Research Institute of the McGill University Health Centre <john.kildea@mcgill.ca>

SPDX-License-Identifier: Apache-2.0
-->

<ons-page ng-controller="IndividualDocumentController as doc">
    <generic-toolbar title="{{'DOCUMENT'|translate}}">
        <right-content>
            <ons-toolbar-button ng-click="popoverDocsInfo.show('#buttonDocInfo')" id="buttonDocInfo">
                <ons-icon icon="fa-ellipsis-v" fixed-width="true"></ons-icon>
            </ons-toolbar-button>
        </right-content>
    </generic-toolbar>


    <pdf-viewer pdf-content="docParams.Content"
                show-error="doc.errorDownload"
                loading-message="{{'LOADING_DOCUMENT'|translate}}"
                error-message="{{'ERROR_OBTAINING_DOCUMENT'|translate}}"
    ></pdf-viewer>

    <ons-modal var="modal">
        <div style="margin-left: 5px; margin-right: 5px">
            <h3>{{"WARNING"|translate}}</h3>
            <ons-icon icon="ion-alert-circled" size="60px"></ons-icon>
            <p style="margin-top: 5%" class="secure-message">{{"LEAVING_APP"|translate}}</p>
            <p class="unattended-message">{{"CONFIRM_DOWNLOAD"|translate}}</p>
            <ons-button style="margin-top: 5%; font-size: 22px;" ng-click="modal.hide()">{{"CANCEL"|translate}}</ons-button>
            <ons-button style="margin-top: 5%; margin-left: 50px; font-size: 22px; background-color: #F44336"
                        ng-click="modal.hide(); doc.share()">{{"CONTINUE"|translate}}
            </ons-button>
        </div>
    </ons-modal>

    <!-- TODO remove redundancy -->
    <ons-modal var="modalOpenViewer">
        <div style="margin-left: 5px; margin-right: 5px">
            <h3>{{"WARNING"|translate}}</h3>
            <ons-icon icon="ion-alert-circled" size="60px"></ons-icon>
            <p style="margin-top: 5%" class="secure-message">{{"LEAVING_APP"|translate}}</p>
            <p class="unattended-message">{{"CONFIRM_DOWNLOAD"|translate}}</p>
            <ons-button style="margin-top: 5%; font-size: 22px;" ng-click="modalOpenViewer.hide()">{{"CANCEL"|translate}}
            </ons-button>
            <ons-button style="margin-top: 5%; margin-left: 50px; font-size: 22px; background-color: #F44336"
                        ng-click="modalOpenViewer.hide(); doc.openPDF()">{{"CONTINUE"|translate}}
            </ons-button>
        </div>
    </ons-modal>
</ons-page>
