<ons-page ng-controller="QuestionnairesListController as questionnaireListVm">
    <ons-toolbar fixed-style>
        <div class="left">
            <ons-back-button>{{"BACK"|translate}}</ons-back-button>
        </div>
        <div class="center" ng-class="fontSizeTitle">{{"QUESTIONNAIRES"|translate}}</div>
    </ons-toolbar>

    <!--LOADING CIRCLE FOR LIST OF QUESTIONNAIRES-->
    <div ng-show="questionnaireListVm.loading" align="center" style="margin-top:25vh">
        <svg class="progress-circular">
            <circle class="progress-circular__primary" cx="50%" cy="50%" r="40%" fill="none" stroke-width="10%"
                    stroke-miterlimit="10"> </circle>
        </svg>
        <p style="margin-top: 30px">{{"LOADINGQUESTIONNAIRES"| translate }}</p>
    </div>

    <div ng-hide="questionnaireListVm.loading">
        <!--TABBAR-->
        <div class="navigation-bar" ng-hide="tests.loading">
            <div class="navigation-bar__center">
                <div class="button-bar" style="margin-top:10px;width:70%;left:15%;" >
                    <div class="button-bar__item">
                        <input type="radio" name="navi-segment-questionnaire" checked ng-model="questionnaireListVm.tab" value="new">
                        <div class="button-bar__button">{{"QUESTIONNAIRE_NEW"|translate}}</div>
                    </div>
                    <div class="button-bar__item">
                        <input type="radio" name="navi-segment-questionnaire" ng-model="questionnaireListVm.tab" value="progress">
                        <div class="button-bar__button">{{"QUESTIONNAIRE_IN_PROGRESS"|translate}}</div>
                    </div> 
                    <div class="button-bar__item">
                        <input type="radio" name="navi-segment-questionnaire" ng-model="questionnaireListVm.tab" value="completed">
                        <div class="button-bar__button">{{"QUESTIONNAIRE_COMPLETED"|translate}}</div>
                    </div>
                </div>
            </div>
        </div>
        <ons-scroller style="height: calc(100vh - 140px);">
            <div class="ons-row" align="center">
                <div class="ons-col" align="center">
    
                    <!--new questionnaires-->
                    <div ng-if="questionnaireListVm.tab === 'new'" class="ons-row" align="center" style="margin-top: 10px">
                        <div class="ons-col" align="center">
    
                            <!--no new questionnaires-->
                            <p ng-if="!questionnaireListVm.newQuestionnaireExist()" ng-class="fontSizeTitle"
                               style="color: grey; margin-top: 25vh;">
                                {{"QUESTIONNAIRE_NONE_NEW"|translate}}
                            </p>
    
                            <!--if there are questionnaires, list them-->
                            <ul class="list">
                                <li class="list__item list__item--chevron" ng-repeat="questionnaire in questionnaireListVm.newQuestionnaireList | orderBy:'-created' track by $index"
                                    ng-click="questionnaireListVm.goToQuestionnaire(questionnaire)">
                                    <p style="margin-top: 2.7vh; margin-bottom: 2.4vh; line-height: 3.6vh;"
                                       ng-class="fontSizeTitle">{{questionnaire.nickname}}</p>
                                    <p style="margin-top: -2.6vh; color: #757575;" ng-class="fontSizeDesc">
                                        {{"QUESTIONNAIRE_DATE_ADDED"|translate}} {{questionnaire.created | date:'yyyy-MM-dd HH:mm'}}</p>
                                </li>
                            </ul>
                        </div>
                    </div>
    
                    <!--in progress questionnaires-->
                    <div ng-if="questionnaireListVm.tab === 'progress'" class="ons-row" align="center" style="margin-top: 10px">
                        <div class="ons-col" align="center">
    
                            <!--no in progress questionnaires-->
                            <p ng-show="!questionnaireListVm.inProgressQuestionnaireExist()" ng-class="fontSizeTitle"
                               style="color: grey; margin-top: 25vh;">{{"QUESTIONNAIRE_NONE_PROGRESS"|translate}}</p>
    
                            <!--if there are in progress questionnaires: list them-->
                            <ul class="list">
                                <li class="list__item list__item--chevron"
                                    ng-repeat="questionnaire in questionnaireListVm.inProgressQuestionnaireList | orderBy:'-last_updated' track by $index"
                                    ng-click="questionnaireListVm.goToQuestionnaire(questionnaire)">
                                    <p style="margin-top: 2.7vh; margin-bottom: 2.4vh; line-height: 3.6vh;"
                                       ng-class="fontSizeTitle">{{questionnaire.nickname}}</p>
                                    <p style="margin-top: -2.6vh; color: #757575;" ng-class="fontSizeDesc">
                                        {{"QUESTIONNAIRE_DATE_LAST_UPDATED"|translate}} {{questionnaire.last_updated |
                                        date:'yyyy-MM-dd HH:mm:ss'}}</p>
                                </li>
                            </ul>
                        </div>
                    </div>
    
                    <!--completed questionnaires-->
                    <div ng-if="questionnaireListVm.tab === 'completed'" class="ons-row" align="center" style="margin-top: 10px">
                        <div class="ons-col" align="center">
    
                            <!--no completed questionnaires-->
                            <p ng-show="!questionnaireListVm.completedQuestionnaireExist()" ng-class="fontSizeTitle"
                               style="color: grey; margin-top: 25vh;">{{"QUESTIONNAIRE_NONE_COMPLETED"|translate}}</p>
    
                            <!--if there are completed questionnaires: list them-->
                            <ul class="list">
                                <li class="list__item list__item--chevron"
                                    ng-repeat="questionnaire in questionnaireListVm.completedQuestionnaireList | orderBy:'-last_updated' track by $index"
                                    ng-click="questionnaireListVm.goToQuestionnaireSummary(questionnaire)">
                                    <p style="margin-top: 2.7vh; margin-bottom: 2.4vh; line-height: 3.6vh;"
                                       ng-class="fontSizeTitle">{{questionnaire.nickname}}</p>
                                    <p style="margin-top: -2.6vh; color: #757575;" ng-class="fontSizeDesc">
                                        {{"QUESTIONNAIRE_DATE_ANSWERED"|translate}} {{questionnaire.last_updated | date:'yyyy-MM-dd HH:mm'}}</p>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </ons-scroller>

    </div>
</ons-page>
