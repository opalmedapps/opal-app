<ons-page ng-controller="StatusController" style="overcroll-y:none" >
    <ons-toolbar>
        <div class="left">
            <ons-back-button>{{"BACK"|translate}}</ons-back-button>
        </div>
    </ons-toolbar>
    <div style="overcroll-y:scroll" >
        <div class="container">
            <div style="margin-top:1px">
                <div ng-show="noData" class="btn my-home-profile">
                    <div class="plan-info" style="width:100%">
                        <ons-row>
                            <ons-col width="40px">
                                <div class="">
                                    <i class="ion-clipboard iconHomeView"></i>
                                </div>
                            </ons-col>
                            <ons-col>
                                <div class="">
                                    {{"NOTREATMENTPLAN"|translate}}

                                </div>
                            </ons-col>
                        </ons-row>
                    </div>
                </div>
                <div ng-hide="noData">
                    <div class="my-home-profile" style="height:220px;">
                        <ons-row style="margin:0;padding:0">
                            <ons-col align="center">
                                <div ng-show="!completed" class="progressStatus" id="progressStatusStage" >
                                </div>
                                <div class="progressStatus" id="progressStatusPresentStage2" style="margin-top:-200px">
                                </div>
                                <div ng-show="!completed" class="progressStatus" id="progressStatusPastStages2" style="margin-top:-200px">
                                </div>

                                <div align="center">
                                    <div class="progressStatusTextBox" style="font-size:15px">
                                        <div style="vertical-align: middle">
                                            <strong>{{"STEP"|translate}} {{eventIndex}} of {{totalEvents}} </strong>
                                            <div ng-show="!planningCompleted" align="middle" style="margin-left:5px; vertical-align: middle">
                                                {{currentEvent}}
                                                <!--<br>
                                                <strong>{{"STARTTREATMENT"|translate}}:</strong>
                                                <br> {{stages[stages.length-1].Date|date:'MMM d'}}
                                                <br>
                                                <span style="color:grey;font-size:13px" >({{"ESTIMATED"|translate}})</span>-->
                                            </div>
                                            <div ng-show="!treatmentCompleted" align="middle" style="margin-left:5px; vertical-align: middle">
                                                <strong>{{"UPCOMING"|translate}}:</strong><br>
                                                {{currentEvent.Title}}<br>
                                                <strong>{{"TREATMENTENDS"|translate}}:</strong><br>
                                                {{endingDate|date:'EEE MMM dd yyyy'}}
                                            </div>

                                            <div ng-show="completed" align="middle" style="margin-left:5px">
                                                <p><i class="ion-checkmark-circled iconStatusBox"></i>{{"TREATMENTPLANCOMPLETEDON"|translate}}
                                                    <br><strong>{{completionDate|date:'EEE MMM dd yyyy'}}</strong></p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </ons-col>
                        </ons-row>
                    </div>
                </div>
            </div>
        </div>
        <div style="padding:2px">
            <div class="my-home-profile" ng-show="!noTreatmentPlan" style="padding:0">
                <div id="divTreatmentPlan" style="overflow-y:scroll">
                    <ons-list class="plan-list" style="margin:0;padding:0">
                        <ons-list-item class="plan" modifier="tappable" ng-click="goTo(eventType, app)" ng-repeat="app in events" id="treatmentSessions{{$index}}">
                            <ons-row id="statusStep{{$index}}">
                                <ons-col width="50px" class="plan-left" align="center">
                                    <div class="plan-date" ng-show="app.Status=='Past' || app.TimeStatus=='Past'"><img ng-src="./img/checkedbox.png" width="20px" height="20px"></div>
                                    <div class="plan-duration" ng-show="app.Status=='Future'||app.Status=='Next'||app.TimeStatus=='Next'||app.TimeStatus=='Future'">
                                        <img ng-src="./img/uncheckedbox.png" width="20px" height="20px">
                                    </div>
                                </ons-col>
                                <ons-col width="6px" class="plan-center" ng-style="{ 'background-color': getStyle(app) }"></ons-col>
                                <ons-col class="plan-right">
                                    <div class="plan-name" ng-class="fontSizeTitle"> <span style="text-align:left"><strong>{{$index+1}}</strong></span> {{app.Name || app.Title}}</div>
                                    <div class="plan-info" ng-class="fontSizeDesc">
                                        <div ng-show="app.Type=='Appointment'">
                                            <strong>{{"COMPLETED"|translate}}: </strong>{{app.Date|date:'EEE MMM dd yyyy'}}
                                        </div>
                                        <div ng-show="app.Type=='Task'&&app.Status=='Past' || app.TimeStatus=='Past'">
                                            <strong>{{"COMPLETED"|translate}}: </strong>{{(app.Date||app.ScheduledStartTime)|date:'EEE MMM dd yyyy'}}
                                        </div>
                                        <div ng-show="app.Type=='Task'&&app.Status=='Future'|| app.TimeStatus=='Future'">
                                            <strong>{{"PENDING"|translate}} </strong>
                                        </div>
                                        <div ng-show="app.Type=='Task'&&app.Status=='Next'|| app.TimeStatus=='Next'">
                                            <strong>{{"INPROGRESS"|translate}}...</strong>
                                        </div>
                                    </div>
                                </ons-col>
                            </ons-row>
                        </ons-list-item>
                    </ons-list>
                </div>
            </div>
        </div>
    </div>
</ons-page>
