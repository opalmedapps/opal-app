<ons-page ng-controller="LabResultsController as labs">
    <ons-toolbar fixed-style>
        <div class="left">
            <ons-back-button>{{"BACK"|translate}}</ons-back-button>
        </div>
        <div class="center" ng-class="fontSizeTitle">{{"LAB_RESULTS"|translate}}</div>
        <div class="right"><ons-toolbar-button ng-click="labs.refresh()"><ons-icon icon="ion-ios-refresh-empty" size="2x" style="color: #4F81BB"></ons-icon></ons-toolbar-button></ons-icon></div>
    </ons-toolbar>

    <div ng-show="labs.loading" align="center" style="margin-top:25vh">
        <svg class="progress-circular">
            <circle class="progress-circular__primary" cx="50%" cy="50%" r="40%" fill="none" stroke-width="10%" stroke-miterlimit="10"/>
        </svg>
        <p style="margin-top: 30px">{{ "LOADINGLABRESULTS" | translate }}</p>
    </div>
    <ons-tabbar ng-hide="labs.loading" id="questionnairesNavbar" position="top" style="position: fixed; margin-top: 43px; z-index: 1; height: 49px;">
        <ons-tab class="shadow-2" style="background-color:#ECEFF1;"
                 label="{{'LAB_BYDATE'|translate}}" icon="fa-calendar" active="true" ng-click="labs.showTestResultsByDate()"></ons-tab>
        <ons-tab class="shadow-2" style="background-color:#ECEFF1;"
                 label="{{'LAB_BYTYPE'|translate}}" icon="fa-tags" ng-click="labs.showTestResultsByType()"></ons-tab>
    </ons-tabbar>
    <div ng-hide="labs.loading" style="margin-top: 49px">
        <ons-list ng-show="labs.showByDate">
            <ons-list-item ng-repeat="testResultByDate in labs.tests | orderBy:'-testDateFormat'"
                           ng-click="personalNavigator.pushPage('./views/personal/lab-results/test-view.html',{param:testResultByDate})"
                           modifier="chevron tappable" class="list-item-container">
                <ons-row align="center">
                    <ons-col width="60px" align="center">
                        <div style="margin-left:10px">
                            <ons-icon icon="ion-erlenmeyer-flask" style="color:#8BC34A" size="2x"></ons-icon>
                            <span class="notification" ng-if="testResultByDate.ReadStatus==='0'">&nbsp;</span>
                        </div>
                    </ons-col>
                    <ons-col style="word-wrap: break-word;">
                        <div style="line-height:1;">
                            <span ng-class="fontSizeTitle"> {{testResultByDate.testDateFormat|date:'longDate'}}</span>
                            <p class="item-desc" ng-class="fontSizeDesc">{{"ADDED"|translate}}
                                {{testResultByDate.testDateFormat|date:'shortTime'}}</p>
                        </div>
                    </ons-col>
                </ons-row>
            </ons-list-item>
        </ons-list>
        <ons-list ng-hide="labs.showByDate"
                  ng-repeat="test in labs.tests" >
            <ons-list-header ng-if="$index == 0 || labs.tests[$index-1].testCategory !== test.testCategory"
                             ng-class="fontSizeTitle">{{test.testCategory|translate}}</ons-list-header>
            <ons-list-item modifier="tappable chevron"
                           ng-click="personalNavigator.pushPage('./views/personal/lab-results/timeline-test-component.html',{param:test});"
                           class="list-item-container">
                <div class="name" ng-class="fontSizeTitle">
                    {{test.testName}}
                </div>
            </ons-list-item>
        </ons-list>
    </div>
</ons-page>
